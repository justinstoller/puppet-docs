<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Documentation | Puppet Labs - Configuring Puppet</title>
  	<meta name="description" content="The open source leader in data center automation">
  	<link rel="alternate" type="text/xml" title="Puppet Labs RSS 0.92 Feed" href="http://puppetlabs.com/feed/rss/">
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Atom Feed" href="http://puppetlabs.com/feed/atom/">
  	<link rel="alternate" type="application/rss+xml" title="Puppet Labs RSS 2.0 Feed" href="http://puppetlabs.com/feed/">
  	<link rel="pingback" href="http://puppetlabs.com/xmlrpc.php">
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://puppetlabs.com/xmlrpc.php?rsd" />
    <link rel='index' title='Puppet Labs' href='http://docs.puppetlabs.com' />

<!-- Google stats -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1537572-5");
pageTracker._setDomainName(".puppetlabs.com");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- End Google stats -->


    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='/files/javascripts/html5.js'></script>
    <script type='text/javascript' src='/files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='/files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='/files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='/files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='/files/javascripts/ampersands.js'></script>

     <!--Add rotation jQuery Script -->
	 	
    <script type='text/javascript' src='/files/javascripts/addRotate.js'></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <link rel="canonical" href="http://docs.puppetlabs.com" />
    <!-- /all in one seo pack -->
	
    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="/files/stylesheets/style.css" media="screen"> 
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->
  
    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->		

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>



        
  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>		
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->		

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/puppet/">
              <span>Products</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>            
              <li>
                <ul>
<li class="page_item page-item-769"><a href="http://www.puppetlabs.com/puppet/puppet-enterprise/" title="Puppet Enterprise">Puppet Enterprise</a></li>
<li class="page_item page-item-757"><a href="http://www.puppetlabs.com/puppet/introduction/" title="Puppet">Puppet</a></li>
<li class="page_item page-item-956"><a href="http://www.puppetlabs.com/puppet/how-to-buy/" title="How to Buy">How to Buy</a></li>
<li class="page_item page-item-1159"><a href="http://forge.puppetlabs.com/" title="Module Forge">Module Forge</a></li>

<li class="page_item page-item-2415"><a href="http://www.puppetlabs.com/mcollective/introduction/" title="MCollective">MCollective</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>

            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://www.puppetlabs.com/services/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-839"><a href="http://www.puppetlabs.com/services/support/" title="Enterprise Support">Enterprise Support</a></li>
<li class="page_item page-item-845"><a href="http://www.puppetlabs.com/services/training-workshops/" title="On-Site Training &amp; Consulting">On-Site Training &amp; Consulting</a></li>
<li class="page_item page-item-849"><a href="/category/events/upcoming/" title="Events &amp; Public Training">Events &amp; Public Training</a></li>
<li class="page_item page-item-851"><a href="http://www.puppetlabs.com/services/partners/" title="Partners">Partners</a></li>
<li class="page_item page-item-1037"><a href="/resources/customer-support" title="Customer Support">Customer Support</a></li>
            </ul>
          </li>
          <li id="resources-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/resources/">
              <span>Resources</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/resources/overview-2/" title="Overview">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/resources/customer-support/" title="Customer Support">Customer Support</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com" title="Documentation">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download" title="Downloads">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com" title="Module Forge">Module Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/request-whitepapers.html" title="White Papers">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki" title="Wiki">Wiki</a></li>
            </ul>

          </li>

<li id="customer-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/customers/companies/">
              <span>Customers</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/customers/companies/" title="Overview">Companies</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/customers/case-studies/" title="Case Studies">Case Studies</a></li>
<li class="page_item page-item-1040"><a href="http://www.puppetlabs.com/customers/product-testimonials/" title="Product Testimonials">Product Testimonials</a></li>
<li class="page_item page-item-872"><a href="http://www.puppetlabs.com/customers/what-customers-are-saying/" title="ervice Testimonials">Service Testimonials</a></li>
	</ul>
          </li>
         <li id="community-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/community/">
              <span>Community</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/community/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/blog" title="Blog">Blog</a></li>
<li class="page_item page-item-2264"><a href="http://www.puppetlabs.com/community/puppet-camp/" title="Puppet Camp">Puppet Camp</a></li>
<li class="page_item page-item-2249"><a href="http://www.puppetlabs.com/community/user-groups-and-devops-groups/" title="User Groups &amp; DevOps Groups">User Groups &amp; DevOps Groups</a></li>
<li class="page_item page-item-2215"><a href="http://www.puppetlabs.com/community/presentations/" title="Presentations">Presentations</a></li>

<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/videos/" title="Videos">Videos</a></li>
<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/badges/" title="Badges">Badges</a></li>
            </ul>
          </li>

          <li id="company-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>

            <ul>
              <li class="page_item page-item-2316"><a href="http://www.puppetlabs.com/company/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://www.puppetlabs.com/company/news/" title="News">News</a></li>
<li class="page_item page-item-1571"><a href="http://www.puppetlabs.com/company/jobs/" title="Jobs">Jobs</a></li>
<li class="page_item page-item-2313"><a href="http://www.puppetlabs.com/company/contact-us/" title="Contact Us">Contact Us</a></li>
            </ul>
          </li>
    		</ul>	   
          <div id="misc-navigation">

			  <ul>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
				<li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/#contact">Contact Us</a></li>
				<li><a href="http://puppetlabs.com/resources/downloads" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">

			  <div>
				<input type="hidden" name="cx" value="017884045025332504017:1mnj-dlgfcc" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>

          </div>
      </nav>
    	</div>
    </header>  

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Configuring Puppet</span></h1>
          <ul id="doc-navigation">
            <li><a href="/">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
               	            <dl>
	              <dt>Puppet Guides</dt>
                      <dd><a href="/index.html">Index</a></dd>
                  <dt>Puppet References</dt>
                      <dd><a href="/references/stable/type.html">Resource Types</a></dd>
                      <dd><a href="/references/stable/function.html">Functions</a></dd>
                      <dd><a href="/references/stable/metaparameter.html">Metaparameters</a></dd>
                      <dd><a href="/references/stable/configuration.html">Configuration</a></dd>
                      <dt>References By Version</dt>
                      <dd><a href="/references/2.7.3/">2.7.3</a></dd>
                      <dd><a href="/references/2.6.9/">2.6.9</a></dd>
                      <dd><a href="/references/0.25.5/">0.25.5</a></dd>
                      <dd><a href="/references/0.24.8/">0.24.8</a></dd>
                      <dd><a href="/references/">Other Versions</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="/mcollective/index.html">Index</a></dd>
                      <dd><a href="/mcollective/simplerpc/index.html">SimpleRPC</a></dd>
                      <dd><a href="/mcollective/roadmap/index.html">Roadmap</a></dd>
                      <dd><a href="/mcollective/releasenotes.html">Release Notes</a></dd>
                      <dd><a href="/mcollective/reference/index.html">References</a></dd>
	            </dl>

            </li>
            <li><a href="/contribute.html">Contribute</a></li>
          </ul>
        </div>
      </section>
    
      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1 id="configuring-puppet">Configuring Puppet</h1>

<p>Puppet&rsquo;s behavior can be customized with a <a href="/references/stable/configuration.html">rather large collection of settings</a>. Most of these can be safely ignored, but you&rsquo;ll almost definitely have to modify some of them. </p>

<p>This document describes how Puppet&rsquo;s configuration settings work, and describes all of Puppet&rsquo;s auxiliary config files.</p>

<hr />

<h2 id="puppets-settings">Puppet&rsquo;s Settings</h2>

<p>Puppet is able to automatically generate a reference of all its config settings (<code>puppet doc --reference configuration</code>), and the documentation site includes <a href="/references/">archived references for every recent version of Puppet</a>. You will generally want to consult the <a href="/references/stable/configuration.html">the most recent stable version&rsquo;s reference</a>. </p>

<p>When retrieving the value for a given setting, Puppet follows a simple lookup path, stopping at the first value it finds. In order, it will check:</p>

<ul>
  <li>Values specified on the command line</li>
  <li>Values in environment blocks in <code>puppet.conf</code></li>
  <li>Values in run mode blocks in <code>puppet.conf</code></li>
  <li>Values in the main block of <code>puppet.conf</code></li>
  <li>The default values</li>
</ul>

<p>The settings you&rsquo;ll have to interact with will vary a lot, depending on what you&rsquo;re doing with Puppet. But at the least, you should get familiar with the following: </p>

<ul>
  <li><a href="/references/stable/configuration.html#certname"><code>certname</code></a> &mdash; The locally unique name for this node. If you aren&rsquo;t using DNS names to identify your nodes, you&rsquo;ll need to set it yourself.</li>
  <li><a href="/references/stable/configuration.html#server"><code>server</code></a> &mdash; The puppet master server to request configurations from.</li>
  <li><a href="/references/stable/configuration.html#confdir"><code>confdir</code></a> &mdash; One of Puppet&rsquo;s main working directories, which usually contains config files, manifests, modules, and certificates.</li>
  <li><a href="/references/stable/configuration.html#vardir"><code>vardir</code></a> &mdash; Puppet&rsquo;s other main working directory, which usually contains cached data and configurations, reports, and file backups.</li>
  <li><a href="/references/stable/configuration.html#modulepath"><code>modulepath</code></a> &mdash; The search path for Puppet modules.</li>
  <li><a href="/references/stable/configuration.html#environment"><code>environment</code></a> &mdash; On agent nodes, the <a href="./environment.html">environment</a> to request configuration in. </li>
  <li><a href="/references/stable/configuration.html#nodeterminus"><code>node_terminus</code></a> &mdash; How puppet master should get node definitions; if you use an ENC, you&rsquo;ll need to set it to &ldquo;exec.&rdquo;</li>
  <li><a href="/references/stable/configuration.html#externalnodes"><code>external_nodes</code></a> &mdash; The script to run for node definitions (if you chose a <code>node_terminus</code> of &ldquo;exec&rdquo;). </li>
  <li><a href="/references/stable/configuration.html#report"><code>report</code></a> &mdash; Whether to send reports to the puppet master.</li>
  <li><a href="/references/stable/configuration.html#reports"><code>reports</code></a> &mdash; On the puppet master, which report handler(s) to use. </li>
</ul>

<h2 id="puppetconf"><code>puppet.conf</code></h2>

<p>Puppet&rsquo;s main config file is <code>puppet.conf</code>, which is located in Puppet&rsquo;s <code>confdir</code>. Under Puppet Enterprise, the confdir is <code>/etc/puppetlabs/puppet</code>; on most other systems, the confdir is <code>/etc/puppet</code> when running as root or the Puppet user and <code>~/.puppet</code> when running as a normal user. </p>

<h3 id="file-format">File Format</h3>

<p><code>puppet.conf</code> uses an INI-like format, with <code>[config blocks]</code> containing indented groups of <code>setting = value</code> lines. Comment lines <code># start with an octothorpe</code>; partial-line comments are not allowed in versions prior to 2.7.3, due to a known bug. </p>

<p>You can interpolate the value of a setting by using its name as a <code>$variable</code>. (Note that <code>$environment</code> has special behavior: most of the Puppet applications will interpolate their own environment, but puppet master will use the environment of the agent node it is serving.)</p>

<p>If a setting has multiple values, they should be a comma-separated list. &ldquo;Path&rdquo;-type settings made up of multiple directories should use the system path separator (colon, on most Unices). </p>

<p>Finally, for settings that accept only a single file or directory, you can set the owner, group, and/or mode by putting their desired states in curly braces after the value.</p>

<p>Putting that all together:</p>

<pre><code># a block:
[main]
  # setting = value pairs:
  server = master.puppetlabs.lan
  certname = 005056c00008.localcloud.puppetlabs.lan
  
  # variable interpolation:
  rundir = $vardir/run
  modulepath = /etc/puppet/modules/$environment:/usr/share/puppet/modules
[master]
  # a list:
  reports = store, http
  
  # a multi-directory modulepath:
  modulepath = /etc/puppet/modules:/usr/share/puppet/modules
  
  # setting owner and mode for a directory:
  vardir = /Volumes/zfs/vardir {owner = puppet, mode = 644}
</code></pre>

<h3 id="config-blocks">Config Blocks</h3>

<p>Settings in different config blocks take effect under varying conditions. Settings in a more specific block can override those in a less specific block, as per the lookup path described above. </p>

<h4 id="the-main-block">The <code>[main]</code> Block</h4>

<p>The <code>[main]</code> config block is the least specific. Settings here are always effective, unless overridden by a more specific block. </p>

<h4 id="agent-master-and-user-blocks"><code>[agent]</code>, <code>[master]</code>, and <code>[user]</code> Blocks</h4>

<p>These three blocks correspond to Puppet&rsquo;s run modes. Settings in <code>[agent]</code> will only be used by puppet agent, settings in <code>[master]</code> will be used by puppet master and puppet cert, and settings in <code>[user]</code> will be used by puppet apply. The Faces subcommands introduced in Puppet 2.7 default to the <code>user</code> run mode, but their mode can be changed at run time with the <code>--mode</code> option. Note that not every setting makes sense for every run mode, but specifying a setting in a block where it is irrelevant has no observable effect.</p>

<h5 id="notes-on-puppet-0255-and-older">Notes on Puppet 0.25.5 and Older</h5>

<p>Prior to Puppet 2.6, blocks were assigned by application name rather than by run mode; e.g. <code>[puppetd]</code>, <code>[puppetmasterd]</code>, <code>[puppet]</code>, and <code>[puppetca]</code>. Although these names still work, their use is deprecated, and they interact poorly with the modern run mode blocks. If you have an older config file and are using Puppet 2.6 or later, you should consider changing <code>[puppetd]</code> to <code>[agent]</code>, <code>[puppet]</code> to <code>[user]</code>, and combining <code>[puppetmasterd]</code> and <code>[puppetca]</code> into <code>[master]</code>.</p>

<h4 id="per-environment-blocks">Per-environment Blocks</h4>

<p>Blocks named for <a href="./environment.html">environments</a> are the most specific, and can override settings in the run mode blocks. Only a small number of settings (specifically: <code>modulepath, manifest, manifestdir,</code> and <code>templatedir</code>) can be set in a per-environment block; any other settings will be ignored and read from a run mode or main block.</p>

<p>Like with the <code>$environment</code> variable, puppet master treats environments differently from the other run modes: instead of using the block corresponding to its own <code>environment</code> setting, it will use the block corresponding to each agent node&rsquo;s environment. The puppet master&rsquo;s own environment setting is effectively inert. </p>

<h2 id="command-line-options">Command-Line Options</h2>

<p>You can override any config setting at runtime by specifying it as a command-line option to almost any Puppet application. (Puppet doc is the main exception.) </p>

<p>Boolean settings are handled a little differently: use a bare option for a true value, and add a prefix of <code>no-</code> for false:</p>

<pre><code># Equivalent to listen = true:
$ puppet agent --listen
# Equivalent to listen = false:
$ puppet agent --no-listen
</code></pre>

<p>For non-boolean settings, just follow the option with the desired value: </p>

<pre><code>$ puppet agent --certname magpie.puppetlabs.lan
# An equals sign is optional:
$ puppet agent --certname=magpie.puppetlabs.lan
</code></pre>

<h2 id="inspecting-settings">Inspecting Settings</h2>

<p>Puppet agent, apply, and master all accept the <code>--configprint &lt;setting&gt;</code> option, which makes them print their local value of the requested setting and exit. In Puppet 2.7, you can also use the <code>puppet config print &lt;setting&gt;</code> action, and view values in different run modes with the <code>--mode</code> flag. Either way, you can view all settings by passing <code>all</code> instead of a specific setting. </p>

<pre><code>$ puppet master --configprint modulepath
# or:
$ puppet config print modulepath --mode master

/etc/puppet/modules:/usr/share/puppet/modules
</code></pre>

<p>Puppet agent, apply, and master also accept a <code>--genconfig</code> option, which behaves similarly to <code>--configprint all</code> but outputs a complete <code>puppet.conf</code> file, with descriptive comments for each setting, default values explicitly declared, and settings irrelevant to the requested run mode commented out. Having the documentation inline and the default values laid out explicitly can be helpful for setting up your config file, or it can be noisy and hard to work with; it comes down to personal taste. </p>

<p>You can also inspect settings for specific environments with the <code>--environment</code> option:</p>

<pre><code>$ puppet agent --environment testing --configprint modulepath
/etc/puppet/testing/modules:/usr/share/puppet/modules
</code></pre>

<p>(As implied above, this doesn&rsquo;t work in the master run mode, since the master effectively has no environment.)</p>

<h2 id="other-configuration-files">Other configuration files</h2>

<p>In addition to the main configuration file, there are five special-purpose config files you might need to interact with: <code>auth.conf</code>, <code>fileserver.conf</code>, <code>tagmail.conf</code>, <code>autosign.conf</code>, and <code>device.conf</code>.</p>

<h3 id="authconf"><code>auth.conf</code></h3>

<p>Access to Puppet&rsquo;s REST API is configured in <code>auth.conf</code>, the location of which is determined by the <code>rest_authconfig</code> setting. (Default: <code>/etc/puppet/auth.conf</code>.) It consists of a series of ACL stanzas, and behaves quite differently from <code>puppet.conf</code>; for full details, see the <a href="./rest_auth_conf.html">REST access control documentation</a>. </p>

<pre><code># Example auth.conf:

path /
auth any
environment override
allow magpie.lan

path /certificate_status
auth any
environment production
allow magpie.lan

path /facts
method save
auth any
allow magpie.lan

path /facts
auth yes
method find, search
allow magpie.lan, dashboard, redmaster.magpie.lan
</code></pre>

<h3 id="fileserverconf"><code>fileserver.conf</code></h3>

<p>By default, <code>fileserver.conf</code> isn&rsquo;t necessary, provided that you only need to serve files from modules. If you want to create additional fileserver mount points, you can do so in <code>/etc/puppet/fileserver.conf</code> (or whatever is set in the <code>fileserverconfig</code> setting).</p>

<p><code>fileserver.conf</code> consists of a collection of mount-point stanzas, and looks like a hybrid of <code>puppet.conf</code> and <code>auth.conf</code>:</p>

<pre><code># Files in the /path/to/files directory will be served
# at puppet:///mount_point/.
[mount_point]
    path /path/to/files
    allow *.domain.com
    deny *.wireless.domain.com
</code></pre>

<p>See the <a href="./file_serving.html">file serving documentation</a> for more details. </p>

<p>Note that certname globs do not function as normal globs: an asterisk can only represent one or more subdomains at the front of a certname that resembles a fully-qualified domain name. (That is, if your certnames don&rsquo;t look like FQDNs, you can&rsquo;t use <code>autosign.conf</code> to full effect.</p>

<h3 id="tagmailconf"><code>tagmail.conf</code></h3>

<p>Your puppet master server can send targeted emails to different admin users whenever certain resources are changed. This requires that you:</p>

<ul>
  <li>Set <code>report = true</code> on your agent nodes</li>
  <li>Set <code>reports = tagmail</code> on the puppet master (<a href="/references/stable/configuration.html#reports"><code>reports</code></a> accepts a list, so you can enable any number of reports)</li>
  <li>Set the <a href="/references/latest/configuration.html#reportfrom"><code>reportfrom</code></a> email address and either the <a href="/references/latest/configuration.html#smtpserver"><code>smtpserver</code></a> or <a href="/references/latest/configuration.html#sendmail"><code>sendmail</code></a> setting on the puppet master</li>
  <li>Create a <code>tagmail.conf</code> file at the location specified in the <code>tagmap</code> setting</li>
</ul>

<p>More details are available at the <a href="http://docs.puppetlabs.com/references/stable/report.html#tagmail">tagmail report reference</a>. </p>

<p>The <code>tagmail.conf</code> file (located at <code>/etc/puppet/tagmail.conf</code> by default, and configurable with the <code>tagmap</code> setting) is list of lines, each of which consists of: </p>

<ul>
  <li>A comma-separated list of tags and !negated tags; valid tags include:
    <ul>
      <li>Explicit tags</li>
      <li>Class names</li>
      <li>&ldquo;<code>all</code>&rdquo;</li>
      <li>Any valid Puppet log level (<code>debug</code>, <code>info</code>, <code>notice</code>, <code>warning</code>, <code>err</code>, <code>alert</code>, <code>emerg</code>, <code>crit</code>, or <code>verbose</code>)</li>
    </ul>
  </li>
  <li>A colon</li>
  <li>A comma-separated list of email addresses</li>
</ul>

<p>The list of tags on a line builds the set of resources whose messages will be included in the mailing; each additional tag adds to the set, and each !negated tag subtracts from the set. </p>

<p>So, for example:</p>

<pre><code>all: log-archive@domain.com
webserver, !mailserver: httpadmins@domain.com
emerg, crit: james@domain.com, zach@domain.com, ben@domain.com
</code></pre>

<p>This <code>tagmail.conf</code> file will mail any resource events tagged with <code>webserver</code> but <em>not</em> with <code>mailserver</code> to the httpadmins group, any emergency or critical events to to James, Zach, and Ben, and all events to the log-archive group.</p>

<h3 id="autosignconf"><code>autosign.conf</code></h3>

<p>The <code>autosign.conf</code> file (located at <code>/etc/puppet/autosign.conf</code> by default, and configurable with the <code>autosign</code> setting) is a list of certnames or certname globs (one per line) whose certificate requests will automatically be signed. </p>

<pre><code>rebuilt.puppetlabs.lan
*.magpie.puppetlabs.lan
*.local
</code></pre>

<p>Note that certname globs do not function as normal globs: an asterisk can only represent one or more subdomains at the front of a certname that resembles a fully-qualified domain name. (That is, if your certnames don&rsquo;t look like FQDNs, you can&rsquo;t use <code>autosign.conf</code> to full effect.</p>

<p>As any host can provide any certname, autosigning should only be used with great care, and only in situations where you essentially trust any computer able to connect to the puppet master.</p>

<h3 id="deviceconf"><code>device.conf</code></h3>

<p>Puppet device, added in Puppet 2.7, configures network hardware using a catalog downloaded from the puppet master; in order to function, it requires that the relevant devices be configured in <code>/etc/puppet/device.conf</code> (configurable with the <code>deviceconfig</code> setting). </p>

<p><code>device.conf</code> is organized in INI-like blocks, with one block per device:</p>

<pre><code>[device certname]
    type &lt;type&gt;
    url &lt;url&gt;
[router6.puppetlabs.lan]
    type cisco
    url ssh://admin:password@ef03c87a.local
</code></pre>

            </div>
            <div class="secondary-content">
                  <div id="subCol">
                  
                  
                      <h3 class="chapter">Contents</h3>
                      
<ol class="toc">
  <li class="toc-lv2"><a href="#puppets-settings">Puppet&rsquo;s Settings</a></li>
  <li class="toc-lv2"><a href="#puppetconf">puppet.conf</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#file-format">File Format</a></li>
   <li class="toc-lv3"><a href="#config-blocks">Config Blocks</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#command-line-options">Command-Line Options</a></li>
  <li class="toc-lv2"><a href="#inspecting-settings">Inspecting Settings</a></li>
  <li class="toc-lv2"><a href="#other-configuration-files">Other configuration files</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#authconf">auth.conf</a></li>
   <li class="toc-lv3"><a href="#fileserverconf">fileserver.conf</a></li>
   <li class="toc-lv3"><a href="#tagmailconf">tagmail.conf</a></li>
   <li class="toc-lv3"><a href="#autosignconf">autosign.conf</a></li>
   <li class="toc-lv3"><a href="#deviceconf">device.conf</a></li>
</ol></li>
</ol>
                  
                                        <!-- New Ads are inserted here -->
		  			<div id="bannerImage" style="display:block;">&nbsp;</div>
		  			<!-- Remove me on September 24 --><a href="http://bit.ly/puppetconf"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/07/120x600_puppetconf.png" style="display:block; margin-left: auto; margin-right: auto;"></a>
                  </div>
            </div>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>  
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>
              
				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">
				
				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>
				
				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />
				
				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />
	
				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />
				
				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>
				
				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>
              
<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>
                
                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>	

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">

					
			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>Written by James Turnbull and Jeff McCune, <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">411 NW Park Avenue</span>
           /
           <span class="locality">Portland</span>, 
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>          
      </div>
    </div>
    <script src="http://munchkin.marketo.net/munchkin.js" type="text/javascript"></script> <script>mktoMunchkin("307-QLA-991");</script> 
    
  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>

	</body>
</html>        
