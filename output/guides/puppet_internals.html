<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Documentation | Puppet Labs - Puppet Internals</title>
  	<meta name="description" content="The open source leader in data center automation">
  	<link rel="alternate" type="text/xml" title="Puppet Labs RSS 0.92 Feed" href="http://puppetlabs.com/feed/rss/">
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Atom Feed" href="http://puppetlabs.com/feed/atom/">
  	<link rel="alternate" type="application/rss+xml" title="Puppet Labs RSS 2.0 Feed" href="http://puppetlabs.com/feed/">
  	<link rel="pingback" href="http://puppetlabs.com/xmlrpc.php">
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://puppetlabs.com/xmlrpc.php?rsd" />
    <link rel='index' title='Puppet Labs' href='http://docs.puppetlabs.com' />

<!-- Google stats -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-1537572-5");
pageTracker._setDomainName(".puppetlabs.com");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- End Google stats -->


    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='/files/javascripts/html5.js'></script>
    <script type='text/javascript' src='/files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='/files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='/files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='/files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='/files/javascripts/ampersands.js'></script>

     <!--Add rotation jQuery Script -->
	 	
    <script type='text/javascript' src='/files/javascripts/addRotate.js'></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <link rel="canonical" href="http://docs.puppetlabs.com" />
    <!-- /all in one seo pack -->
	
    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="/files/stylesheets/style.css" media="screen"> 
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="/files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->
  
    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->		

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>



        
  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>		
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->		

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/puppet/">
              <span>Products</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>            
              <li>
                <ul>
<li class="page_item page-item-769"><a href="http://www.puppetlabs.com/puppet/puppet-enterprise/" title="Puppet Enterprise">Puppet Enterprise</a></li>
<li class="page_item page-item-757"><a href="http://www.puppetlabs.com/puppet/introduction/" title="Puppet">Puppet</a></li>
<li class="page_item page-item-956"><a href="http://www.puppetlabs.com/puppet/how-to-buy/" title="How to Buy">How to Buy</a></li>
<li class="page_item page-item-1159"><a href="http://forge.puppetlabs.com/" title="Module Forge">Module Forge</a></li>

<li class="page_item page-item-2415"><a href="http://www.puppetlabs.com/mcollective/introduction/" title="MCollective">MCollective</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>

            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://www.puppetlabs.com/services/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-839"><a href="http://www.puppetlabs.com/services/support/" title="Enterprise Support">Enterprise Support</a></li>
<li class="page_item page-item-845"><a href="http://www.puppetlabs.com/services/training-workshops/" title="On-Site Training &amp; Consulting">On-Site Training &amp; Consulting</a></li>
<li class="page_item page-item-849"><a href="/category/events/upcoming/" title="Events &amp; Public Training">Events &amp; Public Training</a></li>
<li class="page_item page-item-851"><a href="http://www.puppetlabs.com/services/partners/" title="Partners">Partners</a></li>
<li class="page_item page-item-1037"><a href="/resources/customer-support" title="Customer Support">Customer Support</a></li>
            </ul>
          </li>
          <li id="resources-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/resources/">
              <span>Resources</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/resources/overview-2/" title="Overview">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/resources/customer-support/" title="Customer Support">Customer Support</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com" title="Documentation">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download" title="Downloads">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com" title="Module Forge">Module Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/request-whitepapers.html" title="White Papers">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki" title="Wiki">Wiki</a></li>
            </ul>

          </li>

<li id="customer-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/customers/companies/">
              <span>Customers</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://www.puppetlabs.com/customers/companies/" title="Overview">Companies</a></li>
<li class="page_item page-item-1052"><a href="http://www.puppetlabs.com/customers/case-studies/" title="Case Studies">Case Studies</a></li>
<li class="page_item page-item-1040"><a href="http://www.puppetlabs.com/customers/product-testimonials/" title="Product Testimonials">Product Testimonials</a></li>
<li class="page_item page-item-872"><a href="http://www.puppetlabs.com/customers/what-customers-are-saying/" title="ervice Testimonials">Service Testimonials</a></li>
	</ul>
          </li>
         <li id="community-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/community/">
              <span>Community</span>

              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/community/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2195"><a href="http://www.puppetlabs.com/blog" title="Blog">Blog</a></li>
<li class="page_item page-item-2264"><a href="http://www.puppetlabs.com/community/puppet-camp/" title="Puppet Camp">Puppet Camp</a></li>
<li class="page_item page-item-2249"><a href="http://www.puppetlabs.com/community/user-groups-and-devops-groups/" title="User Groups &amp; DevOps Groups">User Groups &amp; DevOps Groups</a></li>
<li class="page_item page-item-2215"><a href="http://www.puppetlabs.com/community/presentations/" title="Presentations">Presentations</a></li>

<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/videos/" title="Videos">Videos</a></li>
<li class="page_item page-item-2217"><a href="http://www.puppetlabs.com/community/badges/" title="Badges">Badges</a></li>
            </ul>
          </li>

          <li id="company-tab" class="with-submenu">
            <a href="http://www.puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>

            <ul>
              <li class="page_item page-item-2316"><a href="http://www.puppetlabs.com/company/overview/" title="Overview">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://www.puppetlabs.com/company/news/" title="News">News</a></li>
<li class="page_item page-item-1571"><a href="http://www.puppetlabs.com/company/jobs/" title="Jobs">Jobs</a></li>
<li class="page_item page-item-2313"><a href="http://www.puppetlabs.com/company/contact-us/" title="Contact Us">Contact Us</a></li>
            </ul>
          </li>
    		</ul>	   
          <div id="misc-navigation">

			  <ul>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
				<li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/#contact">Contact Us</a></li>
				<li><a href="http://puppetlabs.com/resources/downloads" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">

			  <div>
				<input type="hidden" name="cx" value="017884045025332504017:1mnj-dlgfcc" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>

          </div>
      </nav>
    	</div>
    </header>  

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Puppet Internals</span></h1>
          <ul id="doc-navigation">
            <li><a href="/">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
               	            <dl>
	              <dt>Puppet Guides</dt>
                      <dd><a href="/index.html">Index</a></dd>
                  <dt>Puppet References</dt>
                      <dd><a href="/references/stable/type.html">Resource Types</a></dd>
                      <dd><a href="/references/stable/function.html">Functions</a></dd>
                      <dd><a href="/references/stable/metaparameter.html">Metaparameters</a></dd>
                      <dd><a href="/references/stable/configuration.html">Configuration</a></dd>
                      <dt>References By Version</dt>
                      <dd><a href="/references/2.7.3/">2.7.3</a></dd>
                      <dd><a href="/references/2.6.9/">2.6.9</a></dd>
                      <dd><a href="/references/0.25.5/">0.25.5</a></dd>
                      <dd><a href="/references/0.24.8/">0.24.8</a></dd>
                      <dd><a href="/references/">Other Versions</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="/mcollective/index.html">Index</a></dd>
                      <dd><a href="/mcollective/simplerpc/index.html">SimpleRPC</a></dd>
                      <dd><a href="/mcollective/roadmap/index.html">Roadmap</a></dd>
                      <dd><a href="/mcollective/releasenotes.html">Release Notes</a></dd>
                      <dd><a href="/mcollective/reference/index.html">References</a></dd>
	            </dl>

            </li>
            <li><a href="/contribute.html">Contribute</a></li>
          </ul>
        </div>
      </section>
    
      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1 id="puppet-internals---how-it-works">Puppet Internals - How It Works</h1>

<p>The goal of this document is to describe how a manifest you write
in Puppet gets converted to work being done on the system. This
process is relatively complex, but you seldom need to know many of
the details; this document only exists for those who are pushing
the boundaries of what Puppet can do or who don&rsquo;t understand why
they are seeing a particular error. It can also help those who are
hoping to extend Puppet beyond its current abilities.</p>

<hr />

<h2 id="high-level">High Level</h2>

<p>When looked at coarsely, Puppet has three main phases of execution
&ndash; compiling, instantiation, and configuration.</p>

<h3 id="compiling">Compiling</h3>

<p>Here is where we convert from a text-based manifest into a
node-specific specification. Any code not meant for the host in
question is ignored, and any code that is meant for that host is
fully interpolated, meaning that variables are expanded and all of
the results are literal strings.</p>

<p>The only connection between the compiling phase and the library of
Puppet resource types is that all resulting resource specifications
are verified that the referenced type is valid and that all
specified attributes are valid for that type. There is no value
validation at this point.</p>

<p>In a networked setup, this phase happens entirely on the server.
The output of this phase is a collection of very simplistic
resources that closely resemble basic hashes.</p>

<h3 id="instantiation">Instantiation</h3>

<p>This phase converts the simple hashes and arrays into Puppet
library objects. Because this phase requires so much information
about the client in order to work correctly (e.g., what type of
packaging is used, what type of services, etc.), this phase happens
entirely on the client.</p>

<p>The conversion from the simpler format into literal Puppet objects
allows those objects to do greater validation on the inputs, and
this is where most of the input validation takes place. If you
specified a valid attribute but an invalid value, this is where you
will find it out, meaning that you will find it out when the config
is instantiated on the client, not (unfortunately) on the server.</p>

<p>The output of this phase is the machine&rsquo;s entire configuration in
memory and in a form capable of modifying the local system.</p>

<h3 id="configuration">Configuration</h3>

<p>This is where Puppet actually modifies the system. Each of resource
instance compares its specified state to the state on the machine
and make any modifications that are necessary. If the machine
exactly matches the specified configuration, then no work is done.</p>

<p>The output of this phase is a correctly configured machine, in one
pass.</p>

<h2 id="lower-level">Lower Level</h2>

<p>These three high level phases can each be broken down into more
steps.</p>

<h3 id="compile-phase-1-parsing">Compile Phase 1: Parsing</h3>

<p>Inputs:
Manifests written in the Puppet language</p>

<p>Outputs:
Parse trees (instances of AST objects)</p>

<p>Entry:
Puppet::Parser::Parser#parse</p>

<p>At this point, all Puppet manifests start out as text documents,
and it&rsquo;s the parser&rsquo;s job to understand those documents. The parser
(defined in parser/grammar.ra and parser/lexer.rb) does very little
work &ndash; it converts from text to a format that maps directly back
to the text, building parse trees that are essentially equivalent
to the text itself. The only validation that takes place here is
syntactic.</p>

<p>This phase takes place immediately for all uses of Puppet. Whether
you are using nodes or no nodes, whether you are using the
standalone puppet interpreter or the client/server system, parsing
happens as soon as Puppet starts.</p>

<h3 id="compile-phase-2-interpreting">Compile Phase 2: Interpreting</h3>

<p>Inputs:
Parse trees (instances of AST objects) and client information
(collection of facts output by Facter)</p>

<p>Outputs:
Trees of TransObject and TransBucket instances (from
transportable.rb)</p>

<p>Entry:
Puppet::Parser::AST#evaluate</p>

<p>Exit:
Puppet::Parser::Scope#to_trans</p>

<p>Most configurations will rely on client information to make
decisions. When the Puppet client starts, it loads the
<a href="http://www.reductivelabs.com/projects/facter/">Facter</a> library,
collects all of the facts that it can, and passes those facts to
the interpreter. When you use Puppet over a network, these facts
are passed over the network to the server and the server uses them
to compile the client&rsquo;s configuration.</p>

<p>This step of passing information to the server enables the server
to make decisions about the client based on things like operating
system and hardware architecture, and it also enables the server to
insert information about the client into the configuration,
information like IP address and MAC address.</p>

<p>The interpreter combines the parse trees and the client information
into a tree of simple transportable objects which maps roughly to
the configuration as defined in the manifests &ndash; it is still a
tree, but it is a tree of classes and the resources contained in
those classes.</p>

<h4 id="nodes-vs-no-nodes">Nodes vs. No Nodes</h4>

<p>When you use Puppet, you have the option of using node resources or
not. If you do not use node resources, then the entire
configuration is interpreted every time a client connects, from the
top of the parse tree down. In this case, you must have some kind
of explicit selection mechanism for specifying which code goes with
which node.</p>

<p>If you do use nodes, though, the interpreter precompiles everything
except the node-specific code. When a node connects, the
interpreter looks for the code associated with that node name
(retrieved from the Facter facts) and compiles just that bit on
demand.</p>

<h3 id="configuration-transport">Configuration Transport</h3>

<p>Inputs:
Transportable objects</p>

<p>Outputs:
Transportable objects</p>

<p>Entry:
Puppet::Network::Server::Master#getconfig</p>

<p>Exit:
Puppet::Network::Client::Master#getconfig</p>

<p>If you are using the stand-alone puppet executable, there is no
configuration transport because the client and server are in the
same process. If you are using the networked puppetd client and
puppetmasterd server, though, the configuration must be sent to the
client once it is entirely compiled.</p>

<p>Puppet currently converts the Transportable objects to
<a href="http://www.yaml.org/">YAML</a>, which it then CGI-escapes and sends
over the wire using XMLRPC over HTTPS. The client receives the
configuration, unescapes it, caches it to disk in case the server
is not available on the next run, and then uses YAML to convert it
back to normal Ruby Transportable objects.</p>

<h3 id="instantiation-phase">Instantiation Phase</h3>

<p>Inputs:
Transportable objects</p>

<p>Outputs:
Puppet::Type instances</p>

<p>Entry:
Puppet::Network::Client::Master#run</p>

<p>Exit:
Puppet::Transaction#initialize</p>

<p>To create Puppet library objects (all of which are instances of
Puppet::Type subclasses), to_trans is called on the top-level
transportable object. All container objects get converted to
Puppet::Type::Component instances, and all normal objects get
converted into the appropriate Puppet resource type instance.</p>

<p>This is where all input validation takes place and often where
values get converted into more usable forms. For instance,
filesystems always return user IDs, not user names, so Puppet
objects convert them appropriately. (Incidentally, sometimes Puppet
is creating the user that it&rsquo;s chowning a file to, so whenever
possible it ignores validation errors until the last minute).</p>

<p>Once all of the resources are built in a graph-like tree of
components and resources, this tree is converted to a
<a href="http://gratr.rubyforge.org/">GRATR</a> graph. The graph is then
passed to a new transaction instance.</p>

<h3 id="configuration-phase">Configuration Phase</h3>

<p>Inputs:
GRATR graph</p>

<p>Outputs:
Transaction report</p>

<p>Entry:
Puppet::Transaction#evaluate</p>

<p>Exit:
Puppet::Transaction#generate_report</p>

<p>This is the phase in which all of the work is done, tightly
controlled by a transaction.</p>

<h4 id="resource-generation">Resource Generation</h4>

<p>Some resources manage other resource instances, such as recursive
file operations. During this phase, any statically generatable
resources are generated. These generated resources are then added
to the resource graphs.</p>

<h4 id="relationships">Relationships</h4>

<p>The next stage of the configuration process builds a graph to model
resource dependencies. One of the goals of the Puppet language is
to make file order matter as little as possible; this means that a
Puppet resource needs to be able to require other resources listed
later in the manifest, which means that the required resource will
be instantiated after the requiring resource. This dependency graph
is then merged with the original resource graph to build a complete
graph of all resources and all of their relationships.</p>

<h4 id="evaluation">Evaluation</h4>

<p>The transaction does a topological sort on the final relationship
graph and iterates over the resulting list, evaluating each
resource in turn. Each out-of-sync property on each resource
results in a Puppet::StateChange object, which the transaction uses
to tightly control what happens to the resource and when, and also
to guarantee that logs are provided.</p>

<h4 id="reporting">Reporting</h4>

<p>As the transaction progresses, it collects logs and metrics on what
it does. At the end of evaluation, it turns this information into a
report, which it sends to the server (if requested).</p>

<h2 id="conclusion">Conclusion</h2>

<p>That&rsquo;s the entire flow of how a Puppet manifest becomes a complete
configuration. There is more to the Puppet system, such as
FileBuckets, but those are more support staff rather than the main
attraction.</p>

            </div>
            <div class="secondary-content">
                  <div id="subCol">
                  
                  
                      <h3 class="chapter">Contents</h3>
                      
<ol class="toc">
  <li class="toc-lv2"><a href="#high-level">High Level</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#compiling">Compiling</a></li>
   <li class="toc-lv3"><a href="#instantiation">Instantiation</a></li>
   <li class="toc-lv3"><a href="#configuration">Configuration</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#lower-level">Lower Level</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#compile-phase-1-parsing">Compile Phase 1: Parsing</a></li>
   <li class="toc-lv3"><a href="#compile-phase-2-interpreting">Compile Phase 2: Interpreting</a></li>
   <li class="toc-lv3"><a href="#configuration-transport">Configuration Transport</a></li>
   <li class="toc-lv3"><a href="#instantiation-phase">Instantiation Phase</a></li>
   <li class="toc-lv3"><a href="#configuration-phase">Configuration Phase</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#conclusion">Conclusion</a></li>
</ol>
                  
                                        <!-- New Ads are inserted here -->
		  			<div id="bannerImage" style="display:block;">&nbsp;</div>
		  			<!-- Remove me on September 24 --><a href="http://bit.ly/puppetconf"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/07/120x600_puppetconf.png" style="display:block; margin-left: auto; margin-right: auto;"></a>
                  </div>
            </div>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>  
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>
              
				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">
				
				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>
				
				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />
				
				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />
	
				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />
				
				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>
				
				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>
              
<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>
                
                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>	

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">

					
			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>Written by James Turnbull and Jeff McCune, <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">411 NW Park Avenue</span>
           /
           <span class="locality">Portland</span>, 
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>          
      </div>
    </div>
    <script src="http://munchkin.marketo.net/munchkin.js" type="text/javascript"></script> <script>mktoMunchkin("307-QLA-991");</script> 
    
  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>

	</body>
</html>        
